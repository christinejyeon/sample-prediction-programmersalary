---
title: "GLIS 692 Assignment 1 - Christine Kim"
author: "Christine Kim"
date: '2019-01-29'
output:
  html_document: default
  pdf_document: default
---
```{r setup, include=FALSE}
```

## 1. Research Question
RQ: Among 100 different attributes, which attribute would affect one's salary as a programmer the most? 

## 2. Dataset Introduction
The dataset I'm going to use is a 2018 survey data from StackOverflow, the biggest question and answer site for programmers. The survey had 129 questions total and 98,855 responses were recorded for the dataset; note that only 67,441 people completed the entire survey. <br>
The reason why I chose this dataset is that it was the biggest dataset I could find on Kaggle, which made me think that I could retrieve some interesting and meaningful results compared to using other smaller datasets. However, the limitation of the dataset would be that all the survey answers are categorical; the chance to perform estimation is almost impossible. Moreover, as the survey didn't have a specific target group, the data is very general; in other words, my conclusions would be very general too.

```{r}
setwd("/Users/Christine/Downloads/")

og_survey <- read.csv("stack-overflow-2018-developer-survey/survey_results_public.csv")
knitr::kable(head(og_survey[1:5, 1:5]), format = "markdown")
```

## 3. Null hypothesis
One's undergraduate major, gender, or experience (in years) in coding will affect one's salary the most. <br><br>
My expectation is that my null hypothesis will get rejected. I also hope to find out the attribute that contributes to one's salary the most, so that I can figure out if my salary would live up to my expectations. I can't really think of anything that would surprise me as the survey is very straightforward.


## 4. Descriptive plots

```{r}
##### data preprocessing
library(data.table)
salary_byyrscoding <- data.table(og_survey)
salary_byyrscoding <- subset(salary_byyrscoding, !is.na(Salary))
salary_byyrscoding$Salary <- as.numeric(as.character(salary_byyrscoding$Salary))
salary_byyrscoding <- subset(salary_byyrscoding, !is.na(Salary))
salary_byyrscoding <- subset(salary_byyrscoding, (Salary>=(quantile(Salary,probs=0.25)-IQR(Salary)))&(Salary<=(quantile(Salary,probs=0.75)+IQR(Salary))))

salary_bybg <- data.table(og_survey)
salary_bybg$Salary <- as.numeric(as.character(salary_bybg$Salary))
salary_bybg <- subset(salary_bybg, !is.na(Salary))
salary_bybg <- subset(salary_bybg, (Salary>=(quantile(Salary,probs=0.25)-IQR(Salary)))&(Salary<=(quantile(Salary,probs=0.75)+IQR(Salary))))
salary_bybg <- salary_bybg[,list(mean_salary = mean(Salary), min_salary = min(Salary), max_salary = max(Salary)), by=UndergradMajor]
salary_bybg <- salary_bybg[c(-3)]


# temp <- summ_survey
# temp <- temp[,list(bottomwhisker = (quantile(Salary,probs=0.25)-IQR(Salary)), topwhisker = (quantile(Salary,probs=0.75)+IQR(Salary))), by=YearsCoding]
salary_byyrscoding <- salary_byyrscoding[,list(mean_salary = mean(Salary), min_salary = min(Salary), max_salary = max(Salary)), by=YearsCoding]

salary_byyrscoding <- salary_byyrscoding[c(4,7,2,3,8,5,6,10,9,11,1)]


##### drawing plots
library(highcharter)

hcoptslang <- getOption("highcharter.lang")
hcoptslang$thousandsSep <- ","
options(highcharter.lang = hcoptslang)
highchart() %>% 
  hc_add_series(salary_byyrscoding, "column", hcaes(x = YearsCoding, y = mean_salary), name="Responses",
                tooltip = list(pointFormat = "<span style='color:{point.color}'>\u25CF</span> Average salary: <b>{point.mean_salary}")) %>%
  hc_xAxis(categories=salary_byyrscoding$YearsCoding,
           title = list(text = "# of years that one has been coding")
           ) %>%
  hc_yAxis(
    title = list(text = "Annual salary")
  ) %>%
  hc_plotOptions(
    series = list(
      showInLegend = TRUE
    )
    # column = list(
    #   colorByPoint = TRUE
    # )
) %>%
  hc_title(
    text = "Annual salary according to the number of years that one has been coding"
  )

```
As stated in the research question and null hypothesis that I have set up, I thought the number of years that one has been coding would affect one's salary a lot, so I chose to demonstrate how one's salary changes over time as he or she gains more experience in coding. <br><br>



```{r}
highchart() %>% 
  hc_add_series(salary_bybg, "column", hcaes(x = UndergradMajor, y = mean_salary), name="Responses",
                tooltip = list(pointFormat = "<span style='color:{point.color}'>\u25CF</span> Average salary: <b>{point.mean_salary}")) %>%
  hc_xAxis(categories=salary_bybg$UndergradMajor,
           title = list(text = "Undergraduate major")
  ) %>%
  hc_yAxis(
    title = list(text = "Annual salary")
  ) %>%
  hc_plotOptions(
    series = list(
      showInLegend = TRUE
    )
    # column = list(
    #   colorByPoint = TRUE
    # )
  ) %>%
  hc_title(
    text = "Annual salary according to one's undergraduate major"
  )
```
I chose to draw this plot because of my research question too. However, what's interesting is that I thought the programmers from computer science background or other engineering degrees would get the highest salary, as their starting point is different from that of others; however, it seems like one's educational background doesn't matter that much in terms of salary. At the same time, it gives you the basic description of what the dataset is about, just like the former plot. 
